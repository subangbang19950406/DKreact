<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <div id="login">
        点我 登陆
    </div>
    <div id="ss">
        点我 出现列表
    </div>
    <script src="./jquery-1.12.4.js"></script>
    <script>
        var data1 = {
                "staffCode":"dk8888",
                "inputPassword":"123456"
            };
        var jsonStr = JSON.stringify(data1);
        $("#login").click(function(){
            $.ajax({
            //url:"https://test.dongkenet.com/api/tms/1.0.0.daily/console/login",
            url:"https://test.dongkenet.com/api/tms/1.0.0.daily/console/login",
            type:"post",
            data:jsonStr,
            xhrFields: {
            withCredentials: true
            },
            crossDomain: true,
            headers:{"Content-Type":"application/json"},
            dataType:"json",
            success:function(res){
                console.log(res)
            }
        })
        })


        const fetchPost = (url, fetchPrm) => {
            return fetch(url, {
                method: 'POST',
                body: JSON.stringify(fetchPrm),
                credentials: 'include',
                headers: new Headers({
                    'Content-Type': 'application/json', // 指定提交方式为表单提交
                }),
                xhrFields: {
                    withCredentials: true
                }
            }).then((response) => {
                if (response.ok) {
                    return response.json();
                }
                return response.json();
            });
        }

        var data2 = {
            "pageInfo": {
                "pageNo": "1",
                "pageSize": "20"
            }
        };
        var jsonStr = JSON.stringify(data2);
        $("#ss").click(function () {

            //     $.ajax({
            //     //url:"https://test.dongkenet.com/api/tms/1.0.0.daily/console/login",
            //     url:"https://test.dongkenet.com/api/bms/1.0.0.daily/house-verify/query-by-page",
            //     type:"post",
            //     data:jsonStr,
            //     xhrFields: {
            //     withCredentials: true
            //     },
            //     crossDomain: true,
            //     headers:{"Content-Type":"application/json"},
            //     dataType:"json",
            //     success:function(res){
            //         console.log(res)
            //     }
            // })
            fetchPost('https://test.dongkenet.com/api/bms/1.0.0.daily/house-verify/query-by-page', {
            "pageInfo": {
                "pageNo": "1",
                "pageSize": "20"
            }
        }).then(rep => {
            console.log(rep)
        })
        })
    </script>
</body>

</html>